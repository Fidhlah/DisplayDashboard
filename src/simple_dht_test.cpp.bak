#include <Arduino.h>
#include <DHT.h>

// Konfigurasi DHT22
#define DHT_PIN 14
#define DHT_TYPE DHT22

DHT dht(DHT_PIN, DHT_TYPE);

// Variabel untuk menyimpan data sensor
float temperature = 0.0;
float humidity = 0.0;

// Variabel untuk timing
unsigned long lastReadTime = 0;
const unsigned long READ_INTERVAL = 2000; // 2 detik

void setup() {
  // Inisialisasi Serial Monitor
  Serial.begin(115200);
  
  // Tunggu serial monitor siap
  delay(1000);
  
  Serial.println("=================================");
  Serial.println("DHT22 Sensor Test");
  Serial.println("Pin: 14");
  Serial.println("Interval: 2 detik");
  Serial.println("=================================");
  Serial.println();
  
  // Inisialisasi sensor DHT
  dht.begin();
  
  Serial.println("Sensor DHT22 siap!");
  Serial.println();
}

void loop() {
  // Cek apakah sudah waktunya membaca sensor
  unsigned long currentTime = millis();
  
  if (currentTime - lastReadTime >= READ_INTERVAL) {
    lastReadTime = currentTime;
    
    // Baca data dari sensor
    temperature = dht.readTemperature();
    humidity = dht.readHumidity();
    
    // Cek apakah pembacaan berhasil
    if (isnan(temperature) || isnan(humidity)) {
      Serial.println("âŒ Gagal membaca sensor DHT22!");
      Serial.println("   Cek koneksi sensor...");
    } else {
      // Tampilkan data ke serial monitor
      Serial.println("--- Data Sensor DHT22 ---");
      Serial.print("ğŸŒ¡ï¸  Suhu       : ");
      Serial.print(temperature, 1);
      Serial.println(" Â°C");
      
      Serial.print("ğŸ’§ Kelembaban : ");
      Serial.print(humidity, 1);
      Serial.println(" %");
      
      Serial.println("-------------------------");
      Serial.println();
    }
  }
}
